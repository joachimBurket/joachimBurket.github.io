---
title: Navigating the vast (and dangerous) ocean of sd cards
tags: raspberrypi
---

I recently bought a Raspberry Pi 4, and started to use Docker on it. Used to my laptop's SSD and its blazing fast read/write rate, I was a bit surprised when it took more than 10 seconds to pull and use an image.

That's the moment I started questionning the speed of my old sd-card (A Transcend Premium 400x). 

<TODO: My Transcend sd card image>

In 

## Testing my SD Card Speed

To get the actual IO speed of my SD Card, I used the [Agnostics](https://github.com/raspberrypi-ui/agnostics) tool developped by the Raspberry Pi foundation. Because this tool only works on the GUI, I had to use an adapted version of the [`sdtest.sh`](https://github.com/raspberrypi-ui/agnostics/blob/master/data/sdtest.sh) script that can be found in this Gist: [https://gist.github.com/fopina/3b41fc00604d2b7ba0ce82fff6a7e211](https://gist.github.com/fopina/3b41fc00604d2b7ba0ce82fff6a7e211).

Here's the script launched and the results:

```bash
$ curl -s https://gist.githubusercontent.com/fopina/3b41fc00604d2b7ba0ce82fff6a7e211/raw/sdtest.sh > sdtest.sh
$ chmod +x sdtest.sh
$ sudo ./sdtest.sh

Run 1
prepare-file;0;0;6154;12
seq-write;0;0;7022;13
rand-4k-write;0;0;555;138
rand-4k-read;8172;2043;0;0
Sequential write speed 7022 KB/sec (target 10000) - FAIL
Note that sequential write speed declines over time as a card is used - your card may require reformatting
Random write speed 138 IOPS (target 500) - FAIL
Random read speed 2043 IOPS (target 1500) - PASS

Run 2
prepare-file;0;0;6585;12
seq-write;0;0;7871;15
rand-4k-write;0;0;1488;372
rand-4k-read;8104;2026;0;0
Sequential write speed 7871 KB/sec (target 10000) - FAIL
Note that sequential write speed declines over time as a card is used - your card may require reformatting
Random write speed 372 IOPS (target 500) - FAIL
Random read speed 2026 IOPS (target 1500) - PASS

Run 3
prepare-file;0;0;5470;10
seq-write;0;0;8038;15
rand-4k-write;0;0;1131;282
rand-4k-read;7914;1978;0;0
Sequential write speed 8038 KB/sec (target 10000) - FAIL
Note that sequential write speed declines over time as a card is used - your card may require reformatting
Random write speed 282 IOPS (target 500) - FAIL
Random read speed 1978 IOPS (target 1500) - PASS
```


The test is running three times in order to reduce interferences that could be caused by background operations accessing the SD card while the test is running.


## The SD Card Classes


## Conclusion



## Links

Links used for this post:

* [SD Association](https://www.sdcard.org/):
  * [Capacity](https://www.sdcard.org/developers/sd-standard-overview/capacity-sd-sdhc-sdxc-sduc/)
  * [Bus speed](https://www.sdcard.org/developers/sd-standard-overview/bus-speed-default-speed-high-speed-uhs-sd-express/)
  * [Speed classes](https://www.sdcard.org/developers/sd-standard-overview/speed-class/)
  * [Application performance classes](https://www.sdcard.org/developers/sd-standard-overview/application-performance-class/)
* Raspberry Pi:
  * [Raspberry Pi Official SD Card Speed test tool (Agnostics) announcement](https://www.raspberrypi.com/news/sd-card-speed-test/)
  * [Raspberry Pi Agnostics repository](https://github.com/raspberrypi-ui/agnostics)
  * [Agnostics command line script](https://gist.github.com/fopina/3b41fc00604d2b7ba0ce82fff6a7e211)
* SD Cards Benchmarks (Mostly from [Jeff Geerling's blog](https://www.jeffgeerling.com/blog):
  * [Pi Dramble ](https://www.pidramble.com/wiki/benchmarks/microsd-cards)
  * [Jeff Geerling's blog](https://www.jeffgeerling.com/blog/2019/raspberry-pi-microsd-card-performance-comparison-2019)
* SD Cards:
  * [Transcend Premium 400x](https://www.digitec.ch/en/s1/product/transcend-microsdhc-premium-400x-with-adapter-microsdhc-16-gb-u1-uhs-i-memory-card-3520393?dbq=1&gclid=EAIaIQobChMIisjdi5zX8wIVzQyLCh3KrgWGEAQYASABEgLSb_D_BwE&gclsrc=aw.ds)
  * [Samsung Evo Plus](https://www.digitec.ch/en/s1/product/samsung-evo-plus-speicherkarte-128-gb-microsdxc-uhs-i-klasse-10-microsdxc-128-gb-memory-card-16738927)
* 
